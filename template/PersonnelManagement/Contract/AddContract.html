<lib name='jquery'/>
<lib name="jquery.ui" />
<div id="AddContract">
	<h1>新建合同</h1>
	<form method="post">
		<table id="AddContract_table" border="1">
			<thead>
				<tr>
					<th>合同编号:</th>
					<td><widget id="cid" /></td>
				</tr>
				<tr>
					<th>单位员工:</th>
					<th>
						<input type="text" id="selectid" disabled="disabled" style="background-color:white" value="{=$sUserName}"/><a id="selectuser" href="#">选择</a>
					</th>
				</tr>
				<tr>
					<th>开始日期:</th>
					<th><widget id="starttime" /></th>
				</tr>
				<tr>
					<th>结束日期:</th>
					<th><widget id="endtime" /></th>
				</tr>
			</thead>
		</table>
		<input type="hidden" name="hide_uid" id="hide_uid" value="{=$sUid}"/>
		<input type="submit" value="提交" />
	</form>
</div>
<script>
	jQuery('#selectuser').click(
		
		function selectEmployee(){
			var uid = showModalDialog("?c=org.opencomb.openoa.PersonnelManagement.Contract.EmployeeManagement");
			if(uid!=null)
			{
				var arrValue = uid.split('.');
				jquery('#selectid').attr("value",arrValue[1]);
				jquery('#hide_uid').attr("value",arrValue[0]);
			}
		}		
	);
	
	jQuery('form').submit(function(){
		var starttime = jquery("#starttime").val();
		var endtime = jquery("#endtime").val();
		var remindtime = jquery("#remindtime").val();
		
		var t_y = /^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2})$/;
		var time_b = false;

		if(t_y.test(starttime) && t_y.test(endtime) && t_y.test(remindtime))
		{
			time_b = true;
		};

		
		if(time_b)
		{
			return true;	
		}else{
			alert('输入数据格式有错误(例如日期为：1970-02-11)');
			return false;
		}
	})
	
	//设置日期插件配置
	var dateOption = {
		dateFormat:'yy-mm-dd'
			,changeYear:true
			,changeMonth:true
			,monthNames:['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月']
			,monthNamesShort:['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月']
			,dayNames:['周日','周一','周二','周三','周四','周五','周六']
			,dayNamesMin:['周日','周一','周二','周三','周四','周五','周六']
			,dayNamesShort:['周日','周一','周二','周三','周四','周五','周六']
			,yearRange:'1940:2020'
			,showOn:'both'
			,duration:'slow'
			//,buttonText:'日期'
			,buttonImage:'' 		//填写图片路径
			,buttonImageOnly:true
			,appendText:'(yyyy-mm-dd)'
	};
	
	//使用日期插件
	jquery('#starttime').datepicker(dateOption);
	jquery('#endtime').datepicker(dateOption);
</script>